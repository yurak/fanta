.page-header
  .page-header-icon
    = image_tag('navbar/stats.png')
  .page-header-title
    = 'Statistics'
.page-info
  .list-items.list-action-items.center
    .list-row-item
      .list-row-cell
        = link_to 'ALL PLAYERS', league_stats_path(current_user.league)
      .list-row-cell
        %select{onchange: "location = this.value;", class: 'dark-select'}
          %option{selected: true, disabled: true}= 'TEAM'
          - @teams.each do |team|
            %option{value: league_stats_path(current_user.league, team: team.id)}= team.human_name
      .list-row-cell
        %select{onchange: "location = this.value;"}
          %option{selected: true, disabled: true}= 'POSITION'
          - @positions.each do |position|
            %option{value: league_stats_path(current_user.league, position: position.name)}= position.name
  .list-items.stats-headers.center
    .results-header-cell #
    .results-header-cell
      = link_to 'Club', league_stats_path(current_user.league, order: 'club', team_id: params['team'], position: params['position'])
    .results-header-cell
      = link_to 'Name', league_stats_path(current_user.league, order: 'name', team: params['team'], position: params['position'])
    .results-header-cell Positions
    .results-header-cell.player-stats-headers
      .player-stat-header{title: 'Number of matches in mains squad'}= link_to 'MP', league_stats_path(current_user.league, order: 'mp', team: params['team'], position: params['position'])
      .player-stat-header{title: 'Number of scores'}= link_to 'SC', league_stats_path(current_user.league, order: 'sc', team: params['team'], position: params['position'])
      .player-stat-header= link_to 'AvgBS', league_stats_path(current_user.league, order: 'avbs', team: params['team'], position: params['position'])
      .player-stat-header= link_to 'AvgTS', league_stats_path(current_user.league, order: 'avts', team: params['team'], position: params['position'])
    .results-header-cell
      = link_to 'Team', league_stats_path(current_user.league, order: 'team', position: params['position'])
  .list-items.list-items-dark.stats-players.center
    - @players.each_with_index do |player, i|
      .list-row-item
        .list-row-cell= i+1
        .list-row-cell.player-icons
          .club-logo.l-details-club-logo
            = image_tag(player.club.logo_path, alt: 'Club Logo')
        .list-row-cell
          = link_to player.name, player_path(player)
        .list-row-cell
          - player.positions.each do |position|
            .l-details-position-image
              = image_tag("positions/#{position.name}.png")
        .list-row-cell.player-stats
          .player-param= player.played_matches_count
          .player-param= player.scores_count
          .player-param= player.average_score
          .player-param= player.average_total_score
        .list-row-cell.player-icons
          .club-logo.l-details-club-logo
            = image_tag(player.team.logo_path, alt: 'Team Logo')
  -# TODO: add Tour stats tab
-#    .tab-pane.fade#stat-tours
-#      .teams-order-group
-#        .btn-group{role: 'group'}
-#          .btn-group{role: 'group'}
-#            %button.btn.btn-outline-primary.order-btn.dropdown-toggle#tours-drop{ type: 'button', 'data-toggle' => 'dropdown', 'aria-haspopup' => true, 'aria-expanded' => 'false' } Tours
-#            .dropdown-menu{ 'aria-labelledby' => 'tours-drop' }
-#              - @tours.each do |tour|
-#                = link_to tour.number, clubs_path(tour: tour.id), class: 'dropdown-item'
-#      .tour-stat-headers
-#        .tour-stat-header #
-#        .tour-stat-header.player-param-name Name
-#        .tour-stat-header Positions
-#        .tour-stat-header Club
-#        .tour-stat-header Team
-#        .tour-stat-header Total score
-#      - @tour_players.each_with_index do |mp, i|
-#        .tour-stat
-#          .player-param= i+1
-#          - if mp.player.team
-#            .player-param.player-param-name= link_to mp.player.name, player_path(mp.player)
-#          - else
-#            .player-param.player-param-name= mp.player.name
-#          .player-param.player-param-img
-#            - mp.real_position.split('/').each do |position|
-#              .l-details-position-image
-#                = image_tag("positions/#{position}.png")
-#          .player-param.player-param-club
-#            .club-logo.l-details-club-logo{ class: mp.player.club.code.downcase }
-#            .player-param-club-name= mp.player.club.code
-#          .player-param.player-param-img
-#            - if mp.player.team
-#              = image_tag(mp.player.team.logo_path, alt: "Logo")
-#            - else
-#              = image_tag(mp.lineup.team.logo_path, alt: "Logo")
-#          .player-param= mp.total_score

