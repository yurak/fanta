.nav-panel
  .left-nav
    .root-logo
      = link_to root_path do
        = image_tag('logo628.png')
    - if user_signed_in?
      - current_user.teams.each do |team|
        .nav-logo{ class: "nav-logo-#{ team.league == league }"}
          = link_to tour_path(team.league.active_tour_or_last) do
            = image_tag(team.league.tournament.logo_path)
    .nav-logo-bottom
      .nav-logo-small
        = link_to leagues_path do
          .nav-link-icon= 'üèë'
          .nav-link-title= t('header.leagues')
      -# TODO: add link to fixtures page
      -#.nav-logo-small
      -#  = link_to '' do
      -#    .nav-link-icon= 'üóì'
      -#    .nav-link-title= t('header.fixtures')
      -# TODO: add link to deeds page
      -#.nav-logo-small
      -#  = link_to '' do
      -#    .nav-link-icon= 'üèÜ'
      -#    .nav-link-title= t('header.deeds')
      #help-modal-btn.nav-logo-small
        = link_to '' do
          .nav-link-icon= '‚ÅâÔ∏è'
          .nav-link-title= t('header.help')
      -# TODO: add link to donate page
      -#.nav-logo-small
      -#  = link_to '' do
      -#    .nav-link-icon= '‚ù§Ô∏è'
      -#    .nav-link-title= t('header.donate')
      - if current_user&.admin?
        .nav-logo-small
          = link_to rails_admin_path do
            .nav-link-icon= '‚õîÔ∏è'
            .nav-link-title= t('header.admin')
      - if user_signed_in?
        .nav-logo-small
          = link_to user_path(current_user) do
            .nav-link-img
              = image_tag(current_user.avatar_path)
            .nav-link-title= current_user.name

      #help-modal.help-modal
        .help-modal-content
          -# TODO: add links to help pages
          .help-modal-link= link_to t('header.faq'), ''
          .help-modal-link= link_to t('header.rules'), ''
          .help-modal-link= link_to t('header.dictionary'), ''
          .help-modal-link= link_to t('header.links'), ''
          .help-modal-link= link_to t('header.tips'), ''
          .help-modal-plus-links
            .help-modal-link
              = link_to '' do
                .help-modal-link-text= t('header.about')
                .help-modal-link-icon= image_tag('icons/link_out.svg')
            .help-modal-link
              = link_to '' do
                .help-modal-link-text= t('header.prices')
                .help-modal-link-icon= image_tag('icons/link_out.svg')
            .help-modal-link
              = link_to '' do
                .help-modal-link-text= t('header.contact')
                .help-modal-link-icon= image_tag('icons/link_out.svg')


  .right-nav{ class: "active-right-nav-#{ user_team_by_league(current_user, league).present? }"}
    .league-name
      = league.name
    .league-season
      = "#{league.season.start_year}-#{league.season.end_year}"
    .next-round
      - if league.active_tour
        .next-round-title
          .next-round-text= t('header.next')
          .next-round-number= "#{t('header.next_round')} ##{league.active_tour.number}"
        .next-round-datetime
          .next-round-date= league.active_tour.tournament_round.deadline&.strftime("%^a, %^b %e")
          .next-round-time= league.active_tour.tournament_round.deadline&.strftime("%H:%M")
        - if user_team_by_league(current_user, league)&.next_opponent
          .next-round-opponent
            .next-round-vs vs
            .next-round-opponent-logo= image_tag(user_team_by_league(current_user, league).next_opponent.logo_path)
            .next-round-opponent-name= user_team_by_league(current_user, league).next_opponent.human_name
    .league-links
      = link_to tour_path(league.active_tour_or_last) do
        .league-link{class: "link-active-#{ params[:controller] == 'tours' || params[:controller] == 'matches' }"}
          .league-link-icon= image_tag('icons/round/round.svg')
          .league-link-text= t('header.round')
      = link_to league_results_path(league) do
        .league-link{class: "link-active-#{ params[:controller] == 'results' }"}
          .league-link-icon= image_tag('icons/round/table.svg')
          .league-link-text= t('header.table')
      = link_to team_path(user_team_by_league(current_user, league) || league.teams.first) do
        .league-link{class: "link-active-#{ params[:controller] == 'teams' && params[:action] == 'show' }"}
          .league-link-icon= image_tag('icons/round/teams.svg')
          .league-link-text= t('header.teams')
      = link_to players_path(tournament: league.tournament, league: league) do
        .league-link{class: "link-active-#{ params[:controller] == 'players' && params[:action] == 'index' }"}
          .league-link-icon= image_tag('icons/round/players.svg')
          .league-link-text= t('header.players')
      = link_to league_auctions_path(league) do
        .league-link{class: "link-active-#{ params[:controller] == 'auctions' && params[:action] == 'index' }"}
          .league-link-icon= image_tag('icons/round/auctions.svg')
          .league-link-text= t('header.auctions')
      -# = link_to '' do
      -#   .league-link
      -#     .league-link-icon= image_tag('icons/round/statistics.svg')
      -#     .league-link-text= t('header.statistics')
    .league-team
      - if user_team_by_league(current_user, league)
        .league-team-exist
          .league-team-logo= image_tag(user_team_by_league(current_user, league).logo_path)
          .league-team-name= user_team_by_league(current_user, league).human_name
      - else
        .league-team-empty= t('header.not_participant')

:javascript
  var modal = document.getElementById("help-modal");
  var btn = document.getElementById("help-modal-btn");

  btn.onclick = function(e) {
    e.preventDefault();
    modal.style.display = "block";
  };

  window.onclick = function(e) {
    if (e.target == modal) { modal.style.display = "none"; }
  }
